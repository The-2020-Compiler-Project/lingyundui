# 过程报告
---
### 1.目前完成任务
在本次编译原理课程设计中，我负责的是语义分析的部分。

在初步的设计中，我们小组讨论了文法与符号表的设计，确定了初步的编译器前端设计。

对于符号表，我们一开始只是进行了初步的设计，并在之后的编译过程中不断完善。

文法的设计也是最开始确定了主题，在后来编程过程中对递归调用的部分进行了一定修改。

目前确定的文法如下：
><PROGRAM\> -> <TYPE\> <ID\>（）{<MAIN\>}
>
><MAIN\> -> <VARIABLE\> <COM\_SEN\>
>
><VARIABLE\> -> <TYPE\> <IDT\> <VARIABLE\>|<TYPE\> <IDT\>|空       //用于多行
>
><TYPE\> -> int|float|char|struct
>
><ID\> -> <字母\>|<字母\> {<数字\>}|<字母\> {<字母\>}
>
><COM\_SEN\> -> <IF\_SEN\>|<CYCLE\_SEN\>|<ASSIGN\_SEN\>
>
><IF\_SEN\> -> if （<CONDITION\>） {<IF\_FUN\>} else {<IF\_FUN\>}|if（<CONDITION\>）{<IF_\FUN\>}
>
><CONDITION\> -> <ID\> <RELATION\> <IMAGE\>
>
><RELATION\> -> == | != | > | >= | < | <=
>
><IMAGE\> -> <ID\>|<CONS\>
>
><IF\_FUN\> -> <VARIABLE\> <ASSIGN\_SEN\>
>
><CYCLE\_SEN\> -> while <CONDITION\> {<CYCLE\_FUN\>}
>
><CYCLE\_FUN\> -> <VARIABLE\> <ASSIGN\_SEN\>
>
><ASSIGN\_SEN\> -> <VARIABLE\> <ASSIGN\_FUN\>|<ASSIGN\_FUN\>
>
><ASSIGN\_FUN\> -> <ID\> = <EXPRESSION\>
>
><EXPRESSION\> -> <ID\> <ALG\_OP> <EXPRESSION\>|<ID\>
>
><ALG\_OP>-> + | - | * | /
>
><IDT\> -> <ID\>|<ARRAY\_VAR\>|<STRUCT\_VAR\>
>
><ARRAY\_VAR\> -> <ID\> [<INT\>]
>
><STRUCT\_VAR\> -> {<STRUCT\_DEF\>}
>
><STRUCT\_DEF\> -> <VARIABLE\>
>
><CONS\> -> <INT\>|<FLOAT\>
>
><INT\> -> <数字\>|<数字\> {<数字\>}
>
><FLOAT\> -> <INT\>.<INT\>
---
### 2.遇到问题及解决

在实现语义分析的过程中，我最开始在初步确定要求后就直接写代码，然后因为各个部分接口的要求，重复进行几次的算法改变。

之后在网上查找资料，对于生成四元式的算法进行优化和改变，将条件语句和循环语句的优先顺序进行修改。

原本是使用数组进行查询，但后来对于给定的token序列使用数组并不方便，在之后加入栈的造作，对算法需要进行修改。

目前更改的算法已经基本完善，但其中大部分的函数内容还是伪代码形式，需要对应语法分析接口进行更改。

---
### 3.下一步工作计划

首先将算法进一步完善，对接口进行设计和更改。之后，加入对于符号表的查询与搜索部分。因为符号表还需要根据其他前端设计部分进行修改与完善，所以在接下来的实验中我们还需要组员们进行进一步讨论。



